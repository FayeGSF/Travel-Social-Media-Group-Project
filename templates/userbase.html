<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>{% block title %}{% endblock %} - Wanderlogs</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

	</head>
	<body style="background-color:#F3F4F6; display: flex; flex-direction: column; height: 100vh;">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

		<nav class="navbar navbar-expand-md bg-white mb-3 shadow-sm" >
			<div class="container d-flex justify-content-between align-items-center">
				<div class="d-flex align-items-center">
					<img src="/static/images/lvhang.png" alt="" style="width:30px; height:30px;" class="me-2">
					{% if session.get('role') %}
						{% set nextlink = url_for('myjourneys.myjourneys') %}
					{% else %}
						{% set nextlink = url_for('home.publichome') %}
					{% endif %}
					<a class="navbar-brand text-primary fw-bold" href="{{ nextlink }}">
					Wanderlog
					</a>
				</div>

				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>

				{% if session['role'] %}
				<div class="collapse navbar-collapse " id="navbarSupportedContent">
					<!-- Conditional Rendering of logged in user only menu options--> 
					<!-- Features for editor and admin users--> 
					<!-- {% if session['role'] in ['editor','admin'] %}
					{% endif %} -->
					<!-- Features for only admin users--> 
					<!-- {% if session['role'] in ['admin'] %}
					{% endif %} -->
					<!-- Conditional Rendering of user only menu options--> 
					<!-- {% if session['role'] in ['traveller','editor', 'admin'] %} -->
					<ul class="navbar-nav nav-underline ms-auto">
						<!-- <li class="nav-item" >
							<a  class="nav-link{{' active text-primary' if active_page=='home' else ' text-secondary'}} " 
								href="{% if session.get('role') == 'traveller' %}
										{{ url_for('home.travellerhome') }}
									{% elif session.get('role') == 'editor' %}
										{{ url_for('home.editorhome') }}
									{% elif session.get('role') == 'admin' %}
										{{ url_for('home.adminhome') }}
									{% else %}
										{{ url_for('home.publichome') }}
									{% endif %}">Home</a>
						</li> -->
						<li>
							<a class="nav-link{{' active text-primary' if active_page=='myjourneys' else ' text-secondary'}}"
							href ="{{url_for('myjourneys.myjourneys')}}">MyJourneys</a>
						</li>
						<li>
							<a class="nav-link{{' active text-primary' if active_page=='discover' else ' text-secondary'}} "
							href ="{{url_for('discover.homepage')}}">Discover</a>
						</li>
						<li>
							<a class="nav-link{{' active text-primary' if active_page=='profile' else ' text-secondary'}} "
							href ="{{url_for('profile.profile')}}">Profile</a>
						</li>
						{% if session['role'] in ['admin']%}
						<li>
							<a class="nav-link{{' active text-primary' if active_page=='users' else ' text-secondary'}} "
							href ="{{url_for('users.homepage')}}">Users</a>
						</li>
						{% endif %}

						<li class="">
							<a class="nav-link text-secondary text-nowrap" href="{{ url_for('auth.logout') }}">Log Out</a>
						</li>
						
					</ul>
					<!-- <ul class="navbar-nav">
						<li class="nav-item">
							<a class="nav-link{{' active' if active_page=='profile' else ''}} text-secondary" href="{{ url_for('profile.profile') }}">Hi, {{session['username']}}</a>
						</li>
					</ul> -->
					<!-- {% endif %} -->
				</div>
				{% endif %}


				{% if not session['role'] %}
				<div class="collapse navbar-collapse " id="navbarSupportedContent">
					<ul class="navbar-nav nav-underline ms-auto">
						<li class="nav-item">
							<a  class="nav-link {% if request.path == '/login' %}active text-primary{% else %}text-secondary{% endif %}" href="{{ url_for('auth.login') }}">Login</a>
						</li>
						<li class="nav-item">
							<a  class="nav-link {% if request.path == '/signup' %}active text-primary{% else %}text-secondary{% endif %}" href="{{ url_for('auth.signup') }}">Sign Up</a>
						</li>
					</ul>
				</div>
				{% endif %}
				
				<!-- Conditional Rendering of menu options before logging in--> 
			</div>
		</nav>

		<main style="flex: 1;">
			{% block content %}{% endblock %}
		</main>

		<footer style="padding: 2px;  display: flex; align-items: center; justify-content: center;" class="bg-light">
			<div class="container text-center">
				<p class="mb-0 fs-6"><small>&copy; 2025 Wanderlog. All rights reserved.[Developed by Team CHC]</small></p>
			</div>
		</footer>

	</body>
</html>
